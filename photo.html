<!DOCTYPE html>
<html>
<head>
  <title>Photo</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body class="red-bg">

<a class="back-btn" href="gallery.html">Back to Gallery</a>

<div class="photo-box">
  <img id="detailPhoto">
</div>

<audio id="bgMusic" loop></audio>

<script>
const params = new URLSearchParams(window.location.search);
const num = params.get("img");

const photo = document.getElementById("detailPhoto");
const music = document.getElementById("bgMusic");

photo.src = "photos/details/d" + num + ".jpg";
music.src = "music/song" + num + ".mp3";
music.volume = 0;

// mobile-safe autoplay
if(sessionStorage.getItem("allowMusic") === "yes"){
  setTimeout(() => {
    music.play().then(() => {
      let v = 0;
      const fade = setInterval(() => {
        if(v < 0.4){
          v += 0.02;
          music.volume = v;
        } else {
          clearInterval(fade);
        }
      }, 120);
    }).catch(()=>{});
  }, 200);
}
</script>


<script src="js/security.js"></script>

</body>
</html>
